function updateSummary() {
  var e = document.getElementById("iataFrom"),
      t = document.getElementById("city"),
      n = document.getElementById("outboundDate"),
      a = document.getElementById("returnDate"),
      u = document.getElementById("cc_sb3_sb3_flighthotel_sb3_flight_airlines_0"),
      r = document.getElementById("cc_sb3_sb3_flighthotel_sb3_flight_classofservice"),
      l = document.getElementById("cc_sb3_sb3_flighthotel_sb3_flight_airlines_0"),
      o = document.getElementById("cc_sb3_sb3_flighthotel_flighthotel_numGuests1"),
      d = document.getElementById("cc_sb3_sb3_flighthotel_flighthotel_numGuests2"),
      i = document.getElementById("cc_sb3_sb3_flighthotel_flighthotel_numGuests3");

  var s = e ? e.value : "",
      c = t ? t.value : "",
      m = n ? n.value : "",
      v = a ? a.value : "",
      f = u ? u.value : "",
      h = r ? r.value : "",
      g = l ? l.value : "",
      p = o ? o.value : "",
      y = d ? d.value : "",
      b = i ? i.value : "";

  var E = p + " in Room 1";
  if (g >= 2) E += ", " + y + " in Room 2";
  if (g == 3) E += ", " + b + " in Room 3";

  var L = s + " → " + c + " | " + m + " → " + v + " | " + (f || "Any Airline") +
          " | Class: " + h + " | Rooms: " + g + ", Guests: " + E;

  var w = document.getElementById("summary");
  if (w) w.value = L;
}

function initSummaryListeners() {
  var e = document.querySelectorAll("input, select");
  e.forEach(function(el) {
    el.addEventListener("change", updateSummary);
    el.addEventListener("input", updateSummary);
  });

  // Also handle dynamically generated autosuggest selections
  document.addEventListener("click", function(event) {
    if (event.target.classList.contains("suggestion-item")) {
      setTimeout(updateSummary, 50); // Ensure new value is captured
    }
  });

  window.addEventListener("DOMContentLoaded", updateSummary);
}

initSummaryListeners();
