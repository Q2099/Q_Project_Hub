document.addEventListener("DOMContentLoaded", function() {
  const iataFrom = document.getElementById("cc_sb3_sb3_flighthotel_sb3_flighthotel_iataFrom"),
    city = document.getElementById("cc_sb3_sb3_flighthotel_sb3_flighthotel_city"),
    outboundDate = document.getElementById("cc_sb3_sb3_flighthotel_sb3_flighthotel_outboundDate"),
    returnDate = document.getElementById("cc_sb3_sb3_flighthotel_sb3_hotel_numNights"),
    airline = document.getElementById("cc_sb3_sb3_flighthotel_sb3_flight_airlines_0"),
    classOfService = document.getElementById("cc_sb3_sb3_flighthotel_sb3_flight_classofservice"),
    numRooms = document.getElementById("cc_sb3_sb3_flighthotel_sb3_flighthotel_numRooms"),
    numGuests1 = document.getElementById("cc_sb3_sb3_flighthotel_flighthotel_numGuests1"),
    numGuests2 = document.getElementById("cc_sb3_sb3_flighthotel_flighthotel_numGuests2"),
    numGuests3 = document.getElementById("cc_sb3_sb3_flighthotel_flighthotel_numGuests3"),
    summaryBox = document.getElementById("summary");

  // ✅ Map short codes to readable names
  const classNames = {
    "E": "Economy",
    "P": "Premium Economy",
    "B": "Business Class",
    "F": "First Class"
  };

  function updateSummary() {
    const fromVal = iataFrom.value || "—";
    const cityVal = city.value || "—";
    const outVal = outboundDate.value || "—";
    const retVal = returnDate.value || "—";
    const airlineVal = airline.value || "Any Airline";
    const classVal = classOfService.value;
    const className = classNames[classVal] || classVal || "Economy";
    const rooms = numRooms.value || "1";
    const guests1 = numGuests1.value || "0";
    const guests2 = numGuests2.value || "0";
    const guests3 = numGuests3.value || "0";

    let guestSummary = `Room 1: ${guests1} Guests`;
    if (rooms >= 2) guestSummary += `, Room 2: ${guests2} Guests`;
    if (rooms >= 3) guestSummary += `, Room 3: ${guests3} Guests`;

    //summaryBox.value = `${fromVal} → ${cityVal} | ${outVal} → ${retVal} | ${airlineVal} | Class: ${className} | Rooms: ${rooms} | ${guestSummary} Guests`;
    summaryBox.value = `Class: ${className} | Rooms: ${rooms} | ${guestSummary} `;
  }

  // Attach listeners to all form elements
  [
    iataFrom, city, outboundDate, returnDate,
    airline, classOfService, numRooms, numGuests1, numGuests2, numGuests3
  ].forEach(el => {
    el.addEventListener("input", updateSummary);
    el.addEventListener("change", updateSummary);
  });

  updateSummary(); // Initialize summary on page load
});


